Лабораторная №2.

_Наша задача - написать два Dockerfile – плохой и хороший. Плохой должен запускаться и работать корректно, но в нём должно быть не менее 3 “bad practices”. В хорошем Dockerfile они должны быть исправлены. В Readme описать все плохие практики из кода Dockerfile и почему они плохие, как они были исправлены в хорошем  Dockerfile, а также две плохие практики по использованию этого контейнера. Ход нашей работы:_

1. Мы решили написать Докерфайл, поднимайющий вебсервер и выводящий на экран надпись Hello world. Начали с плохого докерфайла, так как было недостаточно знаний в этой сфере (было похожее задание на 1 курсе). Выглядел он так:

**FROM debian:latest

RUN apt-get update
RUN apt-get install -y apache2

EXPOSE 80

RUN echo "<html> <head>   <title> Lab2 </title> </head> <body>  <p> Hello 
world</p></body></html>" > /var/www/html/index.html

CMD ["apache2ctl", "-D", "FOREGROUND"]**

2. Опишем, какие плохие практики мы использовали в этом коде:
    1) Используем несколько команд RUN в несколько строк вместо объединения в одну. Это может привести к расширению изображения из-за увеличения количества слоев. 
    2) Не удаляем ненужные артефакты и загрузки после установки в команде EXPOSE, хотя важно минимизировать размер образа.
    3) Встраиваем HTML-страницу прямо в Dockerfile с помощью команды echo. Так, файл менее читаем, а также менее удобен в обслуживании.
  
3. Запустили код с помощью команд, где порт 80, а имя и тег Dockerfile - tacos/zenit:
   
   _docker build -t tacos/zenit .
   docker run -d -p 80:80 tacos/zenit_
   
<img width="625" alt="Снимок экрана 2023-09-25 в 16 15 49" src="https://github.com/Vikttrr/zenit_cloud_service/assets/112972915/851ad90d-ff52-4b9b-b984-7ad7a806c52a">

<img width="583" alt="Снимок экрана 2023-09-25 в 16 15 55" src="https://github.com/Vikttrr/zenit_cloud_service/assets/112972915/064b4904-e29e-4167-b74c-c581d6278128">


4.  Проверяем через приложение Docker состояние работы файла, а также корректность отображения сайта. "Плохой" Dockerfile запущен.

<img width="987" alt="Снимок экрана 2023-09-25 в 16 16 30" src="https://github.com/Vikttrr/zenit_cloud_service/assets/112972915/072dffe3-3d69-42b0-bf81-3d6f85d0f6a7">


<img width="654" alt="Снимок экрана 2023-09-25 в 16 16 48" src="https://github.com/Vikttrr/zenit_cloud_service/assets/112972915/54c68a9c-2aa2-4c0a-b619-9ca53ecb59b2">

5. Перепишем Dockerfile, исправив плохие практики. Получился такой файл:

**FROM debian:latest

RUN apt-get update && \
    apt-get install -y apache2 && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

RUN rm -rf /var/www/html/*

COPY index.html /var/www/html/

EXPOSE 80

CMD ["apache2ctl", "-D", "FOREGROUND"]**

6. Описываем, как мы исправили код:
     1) Команды apt-get update, apt-get install и cleanup объединены в одну команду RUN. Это уменьшает количество слоев и улучшает кэширование.
     2) Ненужные файлы и каталоги очищаются для уменьшения размера образа.
     3) HTML-контент теперь хранится в отдельном файле index.html и копируется в контейнер. Это улучшает читаемость и удобство обслуживания Dockerfile.
  
7. Также запустили через терминал и проверили работу. Все работает.
8. 
   

